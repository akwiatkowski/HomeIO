= HomeIO backend

This file explain directory structure of backend server

== Structure



* +config+

  Configuration files used for all project classed. When it was sensible
  I moved to configuration yaml file. Name of file is exact, or should be, as class
  name.

  - <tt>config/input</tt>

    Place to store input data, no configuration. This data is ofter processed
    one time, or used for populating DB tables.

    - <tt>config/input/other/EPPO.csv</tt>

      Old weather data logged using KDE weather plugin. You can use <tt>lib/other/custom_old_import.rb</tt>
      to import that kind of data as metars.

--
  TODO: Consider convert to 1 level tree structure for tasks, like 'weather_ripper.
++

* +config_local+
  Local, not versioned configuration files. All passwords I'm storing here.
  Structure is exactly like +config+.


== Notes

- Gem 'daemons' is probably not usable for me. New daemons has root working path.


--
1. Requirements:
* Ruby 1.8.7
* Gems required. Prefered version in parenthesis.
- activemodel (3.0.3)
- activerecord (3.0.3)
- activesupport (3.0.3)
- geokit (1.5.0)
- jabber4r (0.8.0)
- mkrf (0.2.3)
- mysql (2.8.1)
- rgadu (0.2.1)
- sqlite3-ruby (1.3.2)
- xmpp4r (0.5)

2. How to use.
* install Ruby and gems
* check config files (./config/*) and try get to know the project, most important files at start are:
- Geolocation.yml - set your geographic coords here
- MetarLogger.yml - choose cities which you are interested in if default set is not good enough
- StorageActiveRecord.yml - choose sqlite, mysql or other Active Record capable database, and set configuration here.
  Just like in Rails.
- WeatherInteriaPl.yml, WeatherOnetPl.yml, WeatherWpPl.yml - you can set places to log weather using some popular Polish portals
* create database, not schema
* run 'rake db:init' - it should create and populate tables
* run app:
- 'rake supervisor:start' - it will start server which listen to commands
- 'rake action:fetch_metar' - fetch metars set in  MetarLogger.yml
- 'rake action:fetch_weather' - fetch weather data using WeatherRipper using (at this moment) some popular polish portals
- 'rake client:fetch_metar' - send command to server started by 'rake supervisor:start', and make it do 'rake action:fetch_metar'
- 'rake client:fetch_weather' - send command to server started by 'rake supervisor:start', and make it do 'rake action:fetch_weather'

Other command are available after running 'rake -T'. If you have problems you can mail me login 'bobikx' and the server is poczta.fm.
++